# 月子会所小程序——开发中

主色调：#9266f9
暗色：#bfbfbf

## TODO

- [ ] 完善微信登录/注册流程
      - [ ] 完善auth页面
      - [ ] 完善register页面
            - [ ] 输入框清除按钮功能实现（不同输入框共用同一个事件处理函数，利用 e.target.id 区分不同事件源）
            - [ ] 手机号码正则判断
            - [ ] 验证码发送功能接入
            - [ ] 验证码发送后倒计时功能实现（使用wxs，不要直接从逻辑层直接使用定时器每一秒和渲染层通信一次）
      - [ ] 在`commonUtils.js`中添加短信验证码发送和验证工具函数
- [ ] 完善短信验证码流程
      - [x] 完善短信验证码生成方法`generateCode`
      - [x] 完善云函数`sendVertificationCodeSms`的验证码写入数据库的步骤（完善云数据库集合`vcode-record`）
      - [x] 添加短信验证码云函数`validateVCode`
      - [x] 将SMS相关私密配置信息存储到数据库中提取（切换 secretId 和 secretKey）
      - [ ] 优化数据库操作，减少重复代码
      - [x] 完善短信验证码相关常量取值的定义
- [ ] 寻找配置路径别名的解决方案
- [ ] 有获取位置信息的权限但没开手机定位，为什么还是能获取到我的位置(可能是因为有缓存？？)
- [ ] 抽离`commonUtils.js`中的腾讯地图逻辑
- [ ] 完善各个页面的`onShareAppMessage`
- [ ] 完善 throttle 和 debounce
- [ ] 将navBar改为自定义navBar

## DONE

- [x] 将所有`async/await`函数改写为等效的函数，防止打包编译后的代码过大
- [x] 添加获取地理位置操作（获取经纬度、逆转换为具体地址名、权限被禁用后引导用户打开设置的操作）
- [x] 查看腾讯云小程序云开发短信验证解决方案: 使用`tencentcloud-sdk-nodejs`发送短信
- [x] 将云函数的async改写看会不会影响打包结果: 云函数的代码不在本地执行，不会被打包
